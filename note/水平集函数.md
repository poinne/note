### 水平集函数

可以隐式的表示一个曲线或曲面。属于符号距离函数。



![image-20240718102525880](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240718102525880.png)

![image-20240718102601933](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240718102601933.png)

水平集函数是一个高维曲面函数，如果要定义一个曲线，那么水平集函数就是一个三维空间中的曲面，这个曲面与水平面相交，得到的曲线就是所求曲线。

水平集函数（Level Set Function）是一种隐式表示曲线和曲面的数学工具。具体来说：

- **定义**：水平集函数是一个标量函数 $ \phi(x,y,z) $，其中曲线或曲面是函数值为零的等值线或等值面（即 $\phi(x,y,z) = 0$。

- **隐式表示**：这种表示方法不直接存储曲线或曲面的显式几何，而是通过函数值的分布来隐式地描述它们的位置和形状。这使得处理拓扑变化（如分裂和合并）变得更加自然和简单。

- **应用**：水平集方法广泛应用于计算机图形学、图像处理、物理模拟等领域，用于处理形状变形、流体界面追踪等问题。

##### 水平集函数的表示

 $\int_{\Gamma} d\Gamma  = \int_{M} \delta(\phi) |\nabla \phi| dM $

狄拉克 δ 函数选择零水平集的点，梯度的模长确保积分值与曲线的几何性质一致，从而实现隐式曲线表示和计算。

**示例：二维平面上的椭圆**

假设我们有一个长轴为 $a$，短轴为 $b$ 的椭圆，椭圆的中心在原点。我们可以用水平集函数来表示这个椭圆。定义水平集函数 $ \phi(x, y)$ 为：

$ 
\phi(x, y) = \frac{x^2}{a^2} + \frac{y^2}{b^2} - 1
$

这个函数的零水平集，即 $\phi(x, y) = 0$，表示的是椭圆：

$ 
\frac{x^2}{a^2} + \frac{y^2}{b^2} = 1
$

这就是椭圆的方程。

**曲线积分和面积积分的关系**

1. **曲线积分** $ \int_{\Gamma} d\Gamma$

   对于这个椭圆，曲线积分表示椭圆的周长。椭圆周长的计算比较复杂，但我们可以使用近似公式，例如拉梅（Ramanujan）公式来估算：

   $C \approx \pi \left[ 3(a + b) - \sqrt{(3a + b)(a + 3b)} \right]$
   
2. **面积积分** $\int_{M} \delta(\phi) |\nabla \phi| dM $

   我们来看如何通过面积积分来表示这个椭圆的周长：

   - **狄拉克 δ 函数 $\delta(\phi) $**：在二维平面上，它选择的是满足 $\phi(x, y) = 0$ 的点，这些点正好是椭圆上的点。
   - **梯度 $|\nabla \phi| $**：计算水平集函数的梯度 $\phi(x, y)$：

     $ 
     \nabla \phi = \left( \frac{\partial \phi}{\partial x}, \frac{\partial \phi}{\partial y} \right) = \left( \frac{2x}{a^2}, \frac{2y}{b^2} \right)
     $

     于是梯度的模长为：

     $ 
     |\nabla \phi| = \sqrt{\left( \frac{2x}{a^2} \right)^2 + \left( \frac{2y}{b^2} \right)^2} = \sqrt{\frac{4x^2}{a^4} + \frac{4y^2}{b^4}}
     $

   - **面积积分**：现在我们将 $\delta(\phi)$ 和 $|\nabla \phi|$ 代入面积积分公式：

     $ 
     \int_{M} \delta(\phi) |\nabla \phi| dM = \int_{M} \delta(\phi) \sqrt{\frac{4x^2}{a^4} + \frac{4y^2}{b^4}} dM
     $

     由于 $ \delta(\phi)$ 在椭圆周 $\phi(x, y) = 0$ 处取值为 1，而在其他地方为 0，因此积分只在椭圆周上进行，这相当于计算椭圆的周长。

**解释公式**

公式 $ \int_{\Gamma} d\Gamma = \int_{M} \delta(\phi) |\nabla \phi| dM$ 表示通过在整个定义域 $M$ 上的面积积分，选择出零水平集（即椭圆 $\Gamma$）上的点，并计算这些点的集合（曲线）的长度。梯度的模长 $|\nabla \phi|$ 确保了每个满足 $\phi(x, y) = 0$ 的点在积分中的正确权重。

### 符号距离函数（SDF）

**有符号距离场（Signed Distance Field, SDF）** 是一种在计算机图形学、计算几何和物理模拟中广泛使用的数学表示方法。它用于表示一个形状（通常是一个物体或曲面）到各个点的距离，同时保留了点在物体内还是外部的信息。

**主要特点**

1. **定义**：
   - 有符号距离场是一个标量场 $  \phi(x) $，对于空间中每一个点 $ x $，$ \phi(x) $ 表示该点到物体表面的距离。
   - 如果点在物体外部，距离是正值；如果点在物体内部，距离是负值。
   - 物体的表面是 $  \phi(x) = 0 $ 的位置。

2. **数学表达**：
   - 对于给定的物体（如一个三维物体），有符号距离场可以表示为：
     $ 
     \phi(x) = \begin{cases}
     \text{距离}(x, \text{物体表面}) & \text{如果 } x \text{ 在物体外部} \\
     -\text{距离}(x, \text{物体表面}) & \text{如果 } x \text{ 在物体内部}
     \end{cases}
     $

3. **应用**：
   - **碰撞检测**：通过计算物体表面的距离，可以用来判断点是否在物体内外，有助于碰撞检测。
   - **图形渲染**：SDF 可以用于图形渲染中的表面重建、光照计算等。
   - **物理模拟**：在物理模拟中，可以用 SDF 来处理柔体物理、流体动力学等问题。
   - **形状优化和编辑**：SDF 可以用来平滑、压缩或扩展形状，应用于计算机辅助设计（CAD）中。

4. **计算**：
   - **梯度**：有符号距离场的梯度（$\nabla \phi$）在物体表面是单位法向量。
   - **拉普拉斯算子**：SDF 的拉普拉斯算子（$\Delta \phi$）可以用来计算曲率等几何特征。

5. **示例**：
   - 在一个立方体的有符号距离场中，距离场的值在立方体内部为负值，外部为正值，立方体的表面对应距离场值为零的区域。

**图示**

假设有一个球体，球体的表面为 $ \phi(x) = 0 $。对任意一点 $ x $：
- 如果 $ x $ 在球体外部，$ \phi(x) $ 是到球体表面的距离（正值）。
- 如果 $ x $ 在球体内部，$ \phi(x) $ 是到球体表面的距离的负值（负值）。
