### 几何

- 理解曲面的法向、了解曲面的曲率（主曲率、平均曲率、高斯曲率）。

曲线的法向：

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410164757231.png" alt="image-20240410155250562" style="zoom:50%;" />

曲线的形式由它的曲率所唯一决定

对于曲面而言，一点处的切线有无数条，分布在该点处由u，v的偏导所构成的平面上，所以曲面的切线也叫做切平面。

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410160658123.png" alt="image-20240410160658123" style="zoom:50%;" />

该点处垂直于切平面的向量叫做法向。

给定一个方向，这个方向的切线与法向所构成的平面与这个曲面的交线的曲率叫做这个方向的曲率。

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410155250562.png" alt="image-20240410161103492" style="zoom:50%;" />

可以证明：

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410161422222.png" alt="image-20240410161422222" style="zoom:50%;" />

等距变换：曲面进行变换时，每两点之间的距离不发生改变，即为等距变换。





平均曲率：

（求和：1邻域的每条边，每条边权重为该条边所对的两个角的cot）/ 2 LAR

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410164654963.png" alt="image-20240410164757231" style="zoom:50%;" />

高斯曲率：

(2pi - 1领域角度之和）/ LAR

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410195549510.png" alt="image-20240410164654963" style="zoom:50%;" />





- 理解三角形网格上的面法向计算，顶点的平均曲率和高斯曲率计算。
- 了解基于Lapace的三角形网格光顺。
- 理解半边数据结构，了解QEM网格简化算法。
- 了解曲面参数化中的形变梯度、扭曲度量。



colorbar:

计算出每个点的曲率后，将最大值和最小值分别映射到red和blow，然后使用opengl或libigl就可以将网格可视化出来。



这篇文章中推导介绍了各种微分量

![image-20240410165236888](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410165236888.png)





<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410161103492.png" alt="image-20240410165737399" style="zoom:50%;" />

### 微分坐标（laplace坐标、laplace算子）

![image-20240410195549510](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410165737399.png)

这个黄色的向量就是laplace算子，根据求黄点时的权重不同，分为不同的laplace算子。比如：1邻域所有点权重都为1，那黄点就是1邻域所有点的中心，那么就叫做uniform laplace算子。如果使用cot角作为权重，那么就是cot laplace算子。

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410200437267.png" alt="image-20240410195844340" style="zoom:50%;" />

**离散laplace算子：**

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410195844340.png" alt="image-20240410200027242" style="zoom:50%;" />

为什么离散laplace是用$v_i - \sum{w_jv_j}$：

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410200027242.png" alt="image-20240410200437267" style="zoom:50%;" />

拉普拉斯也是平均曲率流的离散形式：

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410200952324.png" alt="image-20240410200952324" style="zoom:50%;" />

所以，如果知道顶点的平均曲率，也可以直接使用平均曲率，而不使用laplace：

此时的H就是平均曲率。

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410202103696.png" alt="image-20240410202103696" style="zoom:50%;" />

不同权重的laplace算子：

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410201224053.png" alt="image-20240410201224053" style="zoom:50%;" />

平均权效果不好，会有自交现象，建议都是用cot权。

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410202225534.png" alt="image-20240410202225534" style="zoom:50%;" />![image-20240410203139924](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410203139924.png)

#### gloabl 求极小曲面

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410204415841.png" alt="image-20240410203203465" style="zoom:50%;" />

联立所有的方程，即可得到一个稀疏矩阵：

在实际计算时，是x,y,z三个分量分别得到一个矩阵进行计算

![image-20240410203700880](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410203203465.png)

方程右侧的$\delta$是最终要逼近的量，比如说要求极小曲面，那么$\delta$就等于0，要沿着laplace方向缩短1/2，那么$\delta$就等于$1/2 * v_i$

因为这个矩阵是非满秩的，所以为了使方程有解，需要加一些条件。

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240420122015583.png" alt="image-20240410204415841" style="zoom:50%;" />

求解步骤：

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410204444765.png" alt="image-20240410204444765" style="zoom:50%;" />

### 仿射变换

变换主要包括：刚体变换、仿射变换、投影变换、非线性变换



在三维空间中，仿射变换若只包含表示旋转、伸缩和剪切变换的复合则为3\*3的矩阵，若还包含平移变换，则为4\*4矩阵。

缩放和平移的仿射变换矩阵：

![image-20240420122015583](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240410203700880.png)

旋转：

<img src="https://raw.githubusercontent.com/poinne/md-pic/main/image-20240420122221033.png" alt="image-20240420122103237" style="zoom:50%;" />

剪切：

二维情况：

![image-20240420122221033](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240420124018682.png)

- 极分解

  类比复数的极分解，矩阵可以分解为一个伸缩矩阵和旋转矩阵的复合

![image-20240420122747353](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240420122747353.png)

变换时总是先旋转和翻转，再伸缩

- 奇异值分解

  ![image-20240420124018682](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240420122103237.png)

任何矩阵A都可以通过奇异值分解分解为三个矩阵，这三个矩阵都有各自的作用。

$V^T$是一个正交矩阵，实现了一个旋转，让右奇异值向量回到标准基。（最大的奇异值对应x轴，第二大对应y轴，以此类推）

$\sum$是一个方形对角矩阵，里面包含了一个维度擦除器，去除了第三个维度，

$U$矩阵，将其旋转到标准基，使其与左奇异值对齐。（还是一个旋转）



![image-20240420125126500](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240420130346972.png)



- 反对称矩阵

  ![image-20240420130346972](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240420130411768.png)

  ![image-20240420130411768](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240420125126500.png)





![image-20240507093123114](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240507093123114.png)

- Mesh Cutting（只切一次）
  - 低扭曲
  - 切割的割缝尽可能短（缝隙两边会出现不一致）

![image-20240507093724799](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240507093951356.png)



分块是怎么分的，有什么约束？（只需要面积最小吗）

分块后的纹理坐标和顶点坐标是怎么对应的？

![image-20240507093951356](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240507102533841.png)





Mesh cutting

- Points -> Paths(将扭曲大的点连起来，作为分割的线)

  1.

  ![image-20240507095312509](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240507093724799.png)

  先选择一条初始的边，然后将网格参数化到圆盘上，找到参数化后扭曲最大的点，然后将初始的边和这个点连接起来（最短路径）。迭代上一步。【只能做到局部最优】

  2. 因为扭曲大的点也就是曲率高的点，直接将曲率高的点连接起来即可。

- Segmentation（定义一些分割的准则，进行分割） 

  ![image-20240507095844687](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240507095844687.png)

  将曲面分割成一片一片的，每一片尽可能是可展的曲面。

  可展曲面是在其上每一点处[高斯曲率](https://baike.baidu.com/item/高斯曲率/1276640?fromModule=lemma_inlink)为零的曲面。

  微分几何中的一种特殊曲面。可以没有拉伸和撕裂地展开到平面上;	

  ![image-20240507102533841](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240507111548587.png)





![image-20240507111548587](https://raw.githubusercontent.com/poinne/md-pic/main/image-20240507095312509.png)